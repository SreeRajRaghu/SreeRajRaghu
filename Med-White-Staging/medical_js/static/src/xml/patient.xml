<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="PatientScreenWidget">
        <div class="patient-screen screen">
            <div class="m-1">
               <!-- <table id="patientScreen" class="table table-head-fixed" width="100%"></table> -->
            </div>
        </div>
    </t>
    <t t-name="BtnPatientScreen">
        <li class="nav-item">
            <a href="#" class="nav-link">
                <i class="fa fa-address-book nav-icon"></i>
                <p><t t-esc="widget.label_list['partner_id'] + 's'" /></p>
            </a>
        </li>
    </t>
    <t t-name="ClientListScreenWidget">
        <div class="clientlist-screen-content container">
            <script type='text/javascript'>
                try{
                    var $civilId = $civilId || undefined;
                    if($civilId !== undefined){
                        $civilId({
                            acquired: function (data) {
                                console.log('acquired : ', window.MedicalModel);
                                window.MedicalModel.gui.current_screen.onReadCard(data);
                            },
                            lost: function(data) {
                                console.log('lost : ', window.MedicalModel);
                                window.MedicalModel.gui.current_screen.onRemoveCard(data)
                            },
                            invalid: function() {
                                console.log('invalid : ', window.MedicalModel);
                                window.MedicalModel.gui.current_screen.onInvalidCard();
                            }
                        });
                    }
                }
                catch(e){
                    console.error(e);
                }
            </script>
            <section class="top-content p-1">
                <div class="row">
                    <div class="col-3">
                        <span class='btn btn-secondary back pull-right'>
                            <i class='fa fa-angle-double-left'></i>
                            Cancel
                        </span>
                    </div>
                    <div class="col-6">
                        <div class="input-group searchbox">
                            <div class="input-group-prepend">
                                <select class="btn btn-outline-dark partner-search-on">
                                    <option value="all">All</option>
                                    <option value="filename"><t t-esc="widget.get_file_label()" /></option>
                                    <option value="name">Name</option>
                                    <option value="phone">Phone</option>
                                    <option value="mobile">Mobile</option>
                                    <option value="civil_id">Civil ID</option>
                                    <option value="card_no">Card No</option>
                                </select>
                            </div>
                            <input type="text" class="form-control" placeholder="Search Customers" />
                            <div class="input-group-append">
                                <span class="btn btn-outline-dark search-clear">
                                    <span class='fa fa-times'></span>
                                </span>
                            </div>
                            <div class="input-group-append">
                                <span class="btn btn-outline-dark search-more">
                                    <span class='fa fa-search'></span>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-3">
                        <span class='btn btn-primary new-customer' role="img" aria-label="Add a customer" title="Add a customer">
                            <i class='fa fa-user'></i>
                            <i class='fa fa-plus'></i>
                        </span>
                        <span class='btn btn-success next oe_hidden highlight'>
                            Select Customer
                            <i class='fa fa-angle-double-right'></i>
                        </span>
                    </div>
                </div>
            </section>
            <section class="full-content">
                <div class='window'>
                    <section class='subwindow collapsed'>
                        <div class='subwindow-container collapsed'>
                            <div class='subwindow-container-fix client-details-contents'>
                            </div>
                        </div>
                    </section>
                    <section class='subwindow'>
                        <div class='subwindow-container'>
                            <div class='subwindow-container-fix touch-scrollable scrollable-y' style="height: 550px; overflow-y: auto;">
                                <table class='table table-striped' style="font-size: 16px;">
                                    <thead>
                                        <tr class="bg-info v-client-table-header">
                                            <th width="20%">Name</th>
                                            <th width="30%">Address</th>
                                            <th>Phone | Mobile</th>
                                            <th><t t-esc="widget.get_file_label()" /></th>
                                            <th>Civil ID</th>
                                            <th t-if="widget.show_blocked_by_resource">
                                                Blocked By
                                            </th>
                                            <!-- <th>History</th>
                                            <th>Balance</th> -->
                                        </tr>
                                    </thead>
                                    <tbody class='client-list-contents v-client-table-body'>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </section>
                </div>
            </section>
        </div>
    </t>
    <t t-name="ClientLine">
        <tr class='client-line' t-att-data-id='partner.id'>
            <td><t t-esc='partner.name' /></td>
            <td><t t-esc='partner.address' /></td>
            <td><t t-esc='partner.phone or partner.mobile or ""' /></td>
            <td><t t-esc='partner[widget.get_config_file_key()] or ""' /></td>
            <td><t t-esc='partner.civil_code or ""' /></td>
            <td t-if="widget.show_blocked_by_resource">
                <t t-foreach="partner.blocked_doctor_ids" t-as="res_id">
                    <t t-set="res" t-value="widget.medical.resource_by_id[res_id]" />
                    <span class="badge badge-pill badge-info" t-if='res'>
                        <t t-esc="res.name" />
                    </span>
                </t>
            </td>
            <!-- <td class="text-center">
                <span class="btn btn-outline-dark p-history"><span class="fa fa-file" /></span>
            </td>
            <td class="text-center">
                <span class="btn btn-outline-danger p-aging"><span class="fa fa-usd" /></span>
            </td> -->
        </tr>
    </t>

    <t t-name="ClientDetailsEdit">
        <section class='client-details edit'>
            <div class="row">
                <div class="col-8">
                    <div class='client-picture'>
                        <t t-if='!partner.id'>
                            <i class='fa fa-camera' role="img" aria-label="Picture" title="Picture"></i>
                        </t>
                        <t t-if='partner.id'>
                            <img t-att-src='widget.partner_icon_url(partner.id)' alt="Partner" style="width: 64px; height: 64px; object-fit: cover;"/>
                        </t>
                        <input type='file' class='image-uploader'></input>
                    </div>
                    <input class='detail form-control client-name border-1' name='name' t-att-value='partner.name or ""' placeholder='Name *'></input>
                    <input class='detail form-control client-name' name='ar_name' t-att-value='partner.ar_name or ""' placeholder='Arabic Name' style="direction: rtl"></input>
                </div>
                <div class="col-4 edit-buttons">
                    <div class='btn btn-secondary undo'><i class='fa fa-undo' role="img" aria-label="Undo" title="Undo"/></div>
                    <div class='btn btn-success save'><i class='fa fa-floppy-o' role="img" aria-label="Save" title="Save"/></div>
                </div>
            </div>
            
            <div class='client-details-box clearfix row'>
                <div class='col-6'>
                    <div class="card card-light">
                        <div class="card-header">Personal</div>
                        <div class="card-body">
                            <div class='client-detail'>
                                <span class='label'>Contact Of</span>
                                <div class="form-control">
                                    <span t-esc="partner.parent_id and partner.parent_id[1] || ''" /> <span class="fa fa-pencil pull-right v-change-parent" />
                                </div>
                                <input class='detail form-control parent_id oe_hidden' disabled="disabled" name='parent_id' t-att-value='partner.parent_id and partner.parent_id and partner.parent_id[0] || ""'></input>
                            </div>
                            <div class='client-detail v-required'>
                                <span class='label'>Civil ID</span>
                                <input class='detail form-control civil_code' name='civil_code'  max="12"   t-att-value='partner.civil_code || ""'></input>
                            </div>
                            <div class='client-detail v-required' t-if="widget.medical.config.company_code == 'pcr'">
                                <span class='label'>Confirm Civil ID</span>
                                <input class='confirm-detail form-control confirm_civil_code' name='confirm_civil_code' type="password" max="12"   t-att-value='partner.civil_code || ""'></input>
                            </div>
                            <div class='client-detail v-required'>
                                <span class='label'>Passport</span>
                                <input class='detail form-control passport_no' name='passport_no'    t-att-value='partner.passport_no || ""'></input>
                            </div>
                            <div class='client-detail'>
                                <span class='label'>Passport Name</span>
                                <input class='detail form-control passport_name' name='passport_name'    t-att-value='partner.passport_name || ""'></input>
                            </div>
                            <div class='client-detail'>
                                <span class='label'>PACI No.</span>
                                <input class='detail form-control civil_paci_no' name='civil_paci_no'    t-att-value='partner.civil_paci_no || ""'></input>
                                <!-- <span class="required-field-sign"> * </span> -->
                            </div>
                            <br />

                            <div class='client-detail'>
                                <span class='label'><t t-esc="widget.get_file_label()" /></span>
                                <div t-if="widget.medical.config.depends_on == 'file_no'">
                                    <t t-if="widget.medical.company.auto_patient_sequence == 'manual'">
                                        <t t-if="partner.file_no">
                                            <span class='detail form-control client-file_no' t-esc="partner.file_no" />
                                        </t>
                                        <t t-if="!partner.file_no">
                                            <input type="text" class='d-inline-block detail form-control client-file_no' name='file_no' placeholder='File No' style="width: 200px;"/>
                                            <span class="btn btn-link generate_file_no"><i class="fa fa-flash"/> Auto Assign </span>
                                        </t>
                                    </t>
                                    <t t-else="1">
                                        <span class='form-control client-file_no' t-esc="partner.file_no or ''" />
                                        <t t-if="!partner.file_no">
                                            <em class="text-muted"><i>File Number will be auto-sequenced</i></em>
                                        </t>
                                    </t>
                                </div>
                                <div t-if="widget.medical.config.depends_on == 'file_no2'">
                                    <t t-if="widget.medical.company.auto_derma_sequence == 'manual'">
                                        <t t-if="partner.file_no2">
                                            <span class='detail form-control client-file_no2' t-esc="partner.file_no2" />
                                        </t>
                                        <t t-if="!partner.file_no2">
                                            <input type="text" class='d-inline-block detail form-control client-file_no2' name='file_no2' placeholder='Derma File No' style="width: 200px;"/>
                                            <span class="btn btn-link generate_file_no"><i class="fa fa-flash"/> Auto Assign </span>
                                        </t>
                                    </t>
                                    <t t-else="1">
                                        <span class='form-control client-file_no2' t-esc="partner.file_no2 or ''" />
                                        <t t-if="!partner.file_no2">
                                            <em class="text-muted"><i>File Number will be auto-sequenced</i></em>
                                        </t>
                                    </t>
                                </div>
                            </div>

                            <div class='client-detail'>
                                <span class='label'>Marital</span>
                                <select class='detail form-control client-marital capitalize needsclick' name='marital'>
                                    <option value=''>None</option>
                                    <t t-set="marital" t-value="widget.medical.chrome.marital" />
                                    <t t-foreach='marital or []' t-as='key'>
                                        <t t-if="key == partner.marital">
                                            <option t-att-value='key' selected="selected">
                                                <t t-esc='marital[key]'/>
                                            </option>
                                        </t>
                                        <t t-else="">
                                            <option t-att-value='key'>
                                                <t t-esc='marital[key]'/>
                                            </option>
                                        </t>
                                    </t>
                                </select>
                            </div>
                            <div class='client-detail'>
                                <span class='label'>Person Status</span>
                                <select class='detail form-control client-person-status needsclick' name='person_status'>
                                    <option value=''>None</option>
                                    <t t-set="status" t-value="widget.medical.chrome.person_status" />
                                    <t t-foreach='status or []' t-as='key'>
                                        <t t-if="key == partner.person_status">
                                            <option t-att-value='key' selected="selected">
                                                <t t-esc='status[key]'/>
                                            </option>
                                        </t>
                                        <t t-else="">
                                            <option t-att-value='key'>
                                                <t t-esc='status[key]'/>
                                            </option>
                                        </t>
                                    </t>
                                </select>
                            </div>

                            <div class='client-detail'>
                                <span class='label'>Source</span>
                                <select class='detail form-control client-person-source needsclick' name='utm_source_id'>
                                    <option value=''></option>
                                    <t t-foreach='widget.medical.utm_sources or []' t-as='source'>
                                        <t t-if="partner.utm_source_id and source.id == partner.utm_source_id[0]">
                                            <option t-att-value='source.id' selected="selected">
                                                <t t-esc='source.name'/>
                                            </option>
                                        </t>
                                        <t t-else="">
                                            <option t-att-value='source.id'>
                                                <t t-esc='source.name'/>
                                            </option>
                                        </t>
                                    </t>
                                </select>
                            </div>
                            <div class='client-detail'>
                                <span class='label'>Referral</span>
                                <select class='detail form-control client-person-source needsclick' name='utm_medium_id'>
                                    <option value=''></option>
                                    <t t-foreach='widget.medical.utm_mediums or []' t-as='medium'>
                                        <t t-if="partner.utm_medium_id and medium.id == partner.utm_medium_id[0]">
                                            <option t-att-value='medium.id' selected="selected">
                                                <t t-esc='medium.name'/>
                                            </option>
                                        </t>
                                        <t t-else="">
                                            <option t-att-value='medium.id'>
                                                <t t-esc='medium.name'/>
                                            </option>
                                        </t>
                                    </t>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="card card-light">
                        <div class="card-header">Comment</div>
                        <div class="card-body client-detail">
                            <textarea class="detail" name="comment" rows="2" cols="40"><t t-raw="partner.comment or ''"/></textarea>
                        </div>
                    </div>
                    <!-- <div class="card card-light">
                        <div class="card-header">General</div>
                        <div class="card-body">
                            <div class='client-detail'>
                                <span class='label'>Tax ID</span>
                                <input class='detail form-control vat'           name='vat'     t-att-value='partner.vat || ""'></input>
                            </div>
                            <div t-attf-class='client-detail #{widget.medical.pricelists.length &lt;= 1 ? "oe_hidden" : ""}'>
                                <span class='label'>Pricelist</span>
                                <select class='detail form-control needsclick' name='property_product_pricelist'>
                                    <t t-foreach='widget.medical.pricelists or []' t-as='pricelist'>
                                        <option t-att-value='pricelist.id'
                                                t-att-selected="partner.property_product_pricelist ? (pricelist.id === partner.property_product_pricelist[0] ? true : undefined) : undefined">
                                            <t t-esc='pricelist.display_name'/>
                                        </option>
                                    </t>
                                </select>
                            </div>
                        </div>
                    </div> -->
                </div>
                <div class='col-6'>
                    <div class="card card-light">
                        <div class="card-header">Communication</div>
                        <div class="card-body">
                            <div class='client-detail v-required'>
                                <span class='label'>Nationality</span>
                                <select class='detail form-control client-address-country nationality_id needsclick' name='nationality_id'>
                                    <option value=''>None</option>
                                    <t t-foreach='widget.medical.countries or []' t-as='country'>
                                        <option t-att-value='country.id' t-att-selected="partner.nationality_id ? ((country.id === partner.nationality_id[0]) ? true : undefined) : undefined">
                                            <t t-esc='country.name'/>
                                        </option>
                                    </t>
                                </select>
                            </div>
                            <div class='client-detail v-required'>
                                <span class='label'>Phone/Mobile</span>
                                <input class='detail form-control client-phone'  name='phone'    type='tel'      t-att-value='partner.phone || ""' placeholder="Phone"></input>
                                <input class='detail form-control client-mobile'  name='mobile'    type='tel'      t-att-value='partner.mobile || ""' placeholder="Mobile"></input>
                                <!-- <span class="required-field-sign"> * </span> -->
                            </div>
                            <div class='client-detail v-required' t-if="widget.medical.config.company_code == 'pcr'">
                                <span class='label'>Confirm Phone/Mobile</span>
                                <input class='confirm-detail form-control client-phone'  name='confirm_phone' type='password' t-att-value='partner.phone || ""' placeholder="Phone"></input>
                                <input class='confirm-detail form-control client-mobile'  name='confirm_mobile' type='password' t-att-value='partner.mobile || ""' placeholder="Mobile"></input>
                                <!-- <span class="required-field-sign"> * </span> -->
                            </div>
                            <div class='client-detail v-required'>
                                <span class='label'>Gender</span>
                                <select class='detail form-control client-marital capitalize needsclick d-text-camelcase' name='gender'>
                                    <option value=''>None</option>
                                    <t t-foreach="['male', 'female', 'other']" t-as="gend">
                                        <t t-if="partner.gender == gend">
                                            <option t-att-value="gend" selected="selected" class="capitalize">
                                                <t t-esc="gend"/>
                                            </option>
                                        </t>
                                        <t t-else="">
                                            <option t-att-value="gend" class="capitalize">
                                                <t t-esc="gend"/>
                                            </option>
                                        </t>
                                    </t>
                                </select>
                                <!-- <span class="required-field-sign"> * </span> -->
                            </div>
                            <div class='client-detail'>
                                <span class='label'>Date of Birth</span>
                                <input type="date" class='detail form-control client-birthday v-date' name='birthday' t-att-value='partner.birthday || ""' placeholder='Birthday'></input>
                                <!-- <span class="required-field-sign"> * </span> -->
                            </div>
                            <div class='client-detail'>
                                <span class='label'>Email</span>
                                <input class='detail form-control client-email'  name='email'    type='email'    t-att-value='partner.email || ""'></input>
                            </div>
                            <div class='client-detail'>
                                <span class='label'>Country</span>
                                <select class='detail form-control client-address-country needsclick' name='country_id'>
                                    <option value=''>None</option>
                                    <t t-foreach='widget.medical.countries or []' t-as='country'>
                                        <option t-att-value='country.id' t-att-selected="partner.country_id ? ((country.id === partner.country_id[0]) ? true : undefined) : undefined">
                                            <t t-esc='country.name'/>
                                        </option>
                                    </t>
                                </select>
                            </div>
                            <br />

                            <div class='client-detail'>
                                <span class='label'>Full Address</span>
                                <input class='detail form-control client-address-street2' name='street2'       t-att-value='partner.street2 || ""' placeholder='Address'></input>
                            </div>
                            <div class='client-detail'>
                                <span class='label'>Street</span>
                                <input class='detail form-control client-address-street' name='street'       t-att-value='partner.street || ""' placeholder='Street'></input>
                            </div>
                            <div class='client-detail' style="display:none">
                                <span class='label'>Area</span>
                                <input class='detail form-control client-address-area' name='area'       t-att-value='partner.area || ""' placeholder='Area'></input>
                            </div>
                            <div class='client-detail'>
                                <span class='label'>Select Area</span>
                                <select class='detail form-control client-address-area needsclick' name='area_id'>
                                    <option value=''>None</option>
                                    <t t-foreach='widget.medical.all_areas or []' t-as='area'>
                                        <option t-att-value='area.id' t-att-selected="partner.area_id ? ((area.id === partner.area_id[0]) ? true : undefined) : undefined">
                                            <t t-esc='area.name'/>
                                        </option>
                                    </t>
                                </select>
                                <!-- <input class='detail form-control client-address-area_id' name='area_id'       t-att-value='partner.area_id || ""' placeholder='Area'></input> -->
                            </div>
                            <div class='client-detail'>
                                <span class='label'>Block</span>
                                <input class='detail form-control client-address-block' name='block'       t-att-value='partner.block || ""' placeholder='Block'></input>
                            </div>
                            <div class='client-detail'>
                                <span class='label'>Avenue</span>
                                <input class='detail form-control client-address-avenue' name='avenue'       t-att-value='partner.avenue || ""' placeholder='Avenue'></input>
                            </div>
                            <div class='client-detail'>
                                <span class='label'>City</span>
                                <input class='detail form-control client-address-city'   name='city'         t-att-value='partner.city || ""' placeholder='City'></input>
                            </div>

                            <div class='client-detail'>
                                <span class='label'>House</span>
                                <input class='detail form-control client-address-house' name='house'       t-att-value='partner.house || ""' placeholder='House'></input>
                            </div>
                            <div class='client-detail'>
                                <span class='label'>Floor</span>
                                <input class='detail form-control client-address-floor' name='floor'       t-att-value='partner.floor || ""' placeholder='Floor'></input>
                            </div>
                            <div class='client-detail'>
                                <span class='label'>Apartment No</span>
                                <input class='detail form-control client-address-apartment_no'   name='apartment_no'         t-att-value='partner.apartment_no || ""' placeholder='Apartment No'></input>
                            </div>
                            <div class='client-detail'>
                                <span class='label'>Postcode</span>
                                <input class='detail form-control client-address-zip'    name='zip'          t-att-value='partner.zip || ""' placeholder='ZIP'></input>
                            </div>
                            <div class='client-detail'>
                                <span class='label'>Civil ID Issued</span>
                                <input class='detail form-control client-address-civil_id_issued' name='civil_id_issued' t-att-value='partner.civil_id_issued || ""'></input>
                            </div>
                            <div class='client-detail'>
                                <span class='label'>Civil ID Expiry</span>
                                <input class='detail form-control client-address-civil_id_expiry' name='civil_id_expiry' t-att-value='partner.civil_id_expiry || ""'></input>
                            </div>
                            <div class='client-detail'>
                                <span class='label'>Residence</span>
                                <input class='detail form-control client-residence' name='residence' t-att-value='partner.residence || ""'></input>
                            </div>
                            <div class='client-detail' style="display:none">
                                <span class='label'>Kuwait Area Code</span>
                                <input class='detail form-control client-area_kw_moh_code' name='area_kw_moh_code' t-att-value='partner.area_kw_moh_code || ""'></input>
                            </div>
                            <div class='client-detail'>
                                <span class='label'>Blood Group</span>
                                <input class='detail form-control client-blood_group' name='blood_group' t-att-value='partner.blood_group || ""'></input>
                            </div>
                            <div class='client-detail'>
                                <span class='label'>Governorate</span>
                                <input class='detail form-control client-governorate' name='governorate' t-att-value='partner.governorate || ""'></input>
                            </div>
                            <div class='client-detail'>
                                <span class='label'>Work Phone</span>
                                <input class='detail form-control client-work_phone' name='work_phone' t-att-value='partner.work_phone || ""'></input>
                            </div>
                            <div class='client-detail'>
                                <span class='label'>Sponser (Civil ID)</span>
                                <input class='detail form-control client-civil_sponser' name='civil_sponser' t-att-value='partner.civil_sponser || ""'></input>
                            </div>
                        </div>
                    </div>
                    <div class="card card-light">
                        <div class="card-header">Diagnosis Summary</div>
                        <div class="card-body client-detail">
                            <textarea class="detail" name="diagnosis_summary" rows="2" cols="40"><t t-raw="partner.diagnosis_summary or ''"/></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </t>
    <!-- <t t-name="ClientDetails">
        <section class='client-details m-4'>
            <div class="row">
                <div class="col-1">
                    <div class='client-picture'>
                        <img t-att-src='widget.partner_icon_url(partner.id)' alt="Partner logo" style="width: 64px; object-fit: cover;"/>
                    </div>
                </div>
                <div class="col-6">
                    <h3><t t-esc='partner.name' /></h3>
                    <div class='edit-buttons pull-right'>
                        <div class='btn btn-outline-dark edit'><i class='fa fa-pencil-square' role="img" aria-label="Edit" title="Edit"/></div>
                    </div>
                </div>
            </div>
            <div class='row client-details-box clearfix'>
                
            </div>
        </section>
    </t> -->
    <t t-name="ClientDetails">
        <t t-set="config" t-value="widget.medical.config" />
        <div class="row">
            <div class="col-6">
                <div class='client-picture'>
                    <img t-att-src='widget.partner_icon_url(partner.id)' alt="Partner logo" style="width: 64px; object-fit: cover;"/>
                </div>
                <h3 style="margin-top: 10px">
                    <div><t t-esc='partner.name' /></div>
                    <div style="direction: rtl"><t t-esc="partner.ar_name or ''" /></div>
                </h3>
                <!-- <div class='edit-buttons pull-right'>
                    <div class='btn btn-outline-dark edit'><i class='fa fa-pencil-square' role="img" aria-label="Edit" title="Edit"/></div>
                </div> -->
            </div>
            <div class="col-6">
                <span class='btn v-print-file'><i class='fa fa-2x fa-print' /></span>
                <span class='btn history' title="Appointments"><i class='fa fa-2x fa-calendar' /></span>
                <span class='btn aged-balance' title="Balance"><i class='fa fa-2x fa-money' /></span>
                <span class='btn new-appointment' title="New Appointment"><i class='fa fa-2x fa-plus' /></span>
                <span class='btn edit'><i class='fa fa-2x fa-pencil-square' /></span>
                <span class='btn cust-form-close'><i class='fa fa-2x fa-times-rectangle' /></span>
            </div>
        </div>
        <section class='client-details client-view'>
            <ul class="nav nav-tabs client-view-tabs">
                <li class="nav-item">
                    <a class="nav-link active" data-toggle="tab" href="#personal">Personal</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#order">Appointments</a>
                </li>
                <li class="nav-item" t-if="config.enable_show_cust_order_lines">
                    <a class="nav-link" data-toggle="tab" href="#orderlines">Services / Products</a>
                </li>
                <li class="nav-item" t-if="config.allow_package">
                    <a class="nav-link" data-toggle="tab" href="#patient-packages">Packages</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#document">Documents</a>
                </li>
                <li class="nav-item" t-if="config.enable_complain">
                    <a class="nav-link" data-toggle="tab" href="#complains">Complains</a>
                </li>
                <li class="nav-item" t-if="config.enable_insurance">
                    <a class="nav-link" data-toggle="tab" href="#patient-insurance">Insurances</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#patient-prev-history">Previous History</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#blocked-by-doctors">Blocked by <t t-esc="widget.label_list['resource_id'] + 's'" /></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#patient-adv-payment">Payment Receipts</a>
                </li>
            </ul>
            <div class="tab-content client-view-body" style="min-height: 400px;">
                <div class='client-details-box clearfix tab-pane fade show active' id="personal">
                    <div class="row">
                    <div class='client-details-left col-6'>
                        <div class="card card-light">
                            <div class="card-header">Personal</div>
                            <div class="card-body">
                                <div class='client-detail' t-if="partner.parent_id">
                                    <span class='label'>Contact Of</span>
                                    <t t-if='partner.parent_id'>
                                        <span class='detail client-parent_id'><t t-esc='partner.parent_id[1]' /></span>
                                    </t>
                                    <t t-else='1'>
                                        <span class='detail client-parent_id empty'>N/A</span>
                                    </t>
                                </div>
                                <div class='client-detail'>
                                    <span class='label'>Civil ID</span>
                                    <t t-if='partner.civil_code'>
                                        <span class='detail client-civil_code'><t t-esc='partner.civil_code' /></span>
                                    </t>
                                    <t t-if='!partner.civil_code'>
                                        <span class='detail client-civil_code empty'>N/A</span>
                                    </t>
                                </div>
                                <div class='client-detail'>
                                    <span class='label'>Passport</span>
                                    <t t-if='partner.passport_no'>
                                        <span class='detail client-passport'><t t-esc='partner.passport_no' /></span>
                                    </t>
                                </div>
                                <div class='client-detail'>
                                    <span class='label'>Passport Name</span>
                                    <t t-if='partner.passport_name'>
                                        <span class='detail client-passport'><t t-esc='partner.passport_name' /></span>
                                    </t>
                                </div>
                                <br />

                                <div class='client-detail'>
                                    <span class='label'><t t-esc="widget.get_file_label()" /></span>
                                    <span class='detail client-file_no'><t t-esc='partner[widget.get_config_file_key()] or ""' /></span>
                                </div>

                                <br />
                                <div class='client-detail'>
                                    <span class='label'>Marital</span>
                                    <t t-if='partner.marital'>
                                        <span class='detail client-marital capitalize'><t t-esc='widget.medical.chrome.marital[partner.marital]' /></span>
                                    </t>
                                </div>
                                <div class='client-detail'>
                                    <span class='label'>Person Status</span>
                                    <t t-if='partner.person_status'>
                                        <span class='detail client-person-status capitalize'><t t-esc='widget.medical.chrome.person_status[partner.person_status]' /></span>
                                    </t>
                                </div>
                                <div class='client-detail'>
                                    <span class='label'>Source</span>
                                    <t t-if='partner.utm_source_id'>
                                        <span class='detail client-utm_source capitalize'>
                                            <t t-esc='partner.utm_source_id[1]' />
                                        </span>
                                    </t>
                                </div>
                                <div class='client-detail'>
                                    <span class='label'>Referral</span>
                                    <t t-if='partner.utm_medium_id'>
                                        <span class='detail client-utm_medium capitalize'>
                                            <t t-esc='partner.utm_medium_id[1]' />
                                        </span>
                                    </t>
                                </div>
                            </div>
                        </div>
                        <div class="card card-light">
                            <div class="card-header">Comment</div>
                            <div class="card-body">
                                <textarea disabled="disabled" rows="2" cols="40"><t t-raw="partner.comment or ''"/></textarea>
                            </div>
                        </div>
                        <!-- <div class="card card-light">
                            <div class="card-header">General</div>
                            <div class="card-body">
                                <div class='client-detail'>
                                    <span class='label'>Barcode</span>
                                    <t t-if='partner.barcode'>
                                        <span class='detail client-id'><t t-esc='partner.barcode'/></span>
                                    </t>
                                    <t t-if='!partner.barcode'>
                                        <span class='detail client-id empty'>N/A</span>
                                    </t>
                                </div>
                                <div t-attf-class='client-detail #{widget.medical.pricelists.length &lt;= 1 ? "oe_hidden" : ""}'>
                                    <span class='label'>Pricelist</span>
                                    <t t-if='partner.property_product_pricelist'>
                                        <span class='detail property_product_pricelist'><t t-esc='partner.property_product_pricelist[1]'/></span>
                                    </t>
                                    <t t-if='!partner.property_product_pricelist'>
                                        <span class='detail property_product_pricelist empty'>N/A</span>
                                    </t>
                                </div>
                                <div class='client-detail'>
                                    <span class='label'>Tax ID</span>
                                    <t t-if='partner.vat'>
                                        <span class='detail vat'><t t-esc='partner.vat'/></span>
                                    </t>
                                    <t t-if='!partner.vat'>
                                        <span class='detail vat empty'>N/A</span>
                                    </t>
                                </div>
                            </div>
                        </div> -->
                    </div>

                    <div class='client-details-right col-6'>
                        <div class="card card-light">
                            <div class="card-header">Communication</div>
                            <div class="card-body">
                                <div class='client-detail'>
                                    <span class='label'>Phone/Mobile</span>
                                    <t t-if='partner.phone or partner.mobile'>
                                        <span class='detail client-phone'>
                                            <t t-esc='partner.phone or ""' />
                                            <t t-if="partner.phone and partner.mobile">
                                                <span>, </span>
                                            </t>
                                            <t t-esc='partner.mobile or ""' />
                                        </span>
                                    </t>
                                    <t t-else='1'>
                                        <span class='detail client-phone empty'>N/A</span>
                                    </t>
                                </div>
                                <div class='client-detail'>
                                    <span class='label'>Gender</span>
                                    <t t-if='partner.gender'>
                                        <span class='detail client-gender capitalize'><t t-esc='partner.gender' /></span>
                                    </t>
                                </div>
                                <div class='client-detail'>
                                    <span class='label'>Date of Birth</span>
                                    <t t-if='partner.birthday'>
                                        <span class='detail client-birthday field-date'><t t-esc='moment(partner.birthday).format("DD/MM/YYYY")' /></span>
                                    </t>
                                    <t t-if='!partner.birthday'>
                                        <span class='detail client-birthday empty'>N/A</span>
                                    </t>
                                </div>
                                <div class='client-detail'>
                                    <span class='label'>Email</span>
                                    <t t-if='partner.email'>
                                        <span class='detail client-email'><t t-esc='partner.email' /></span>
                                    </t>
                                    <t t-if='!partner.email'>
                                        <span class='detail client-email empty'>N/A</span>
                                    </t>
                                </div>
                                <div class='client-detail'>
                                    <span class='label'>Address</span>
                                    <t t-if='partner.address'>
                                        <span class='detail client-address'><t t-esc='partner.address' /></span>
                                    </t>
                                    <t t-if='!partner.address'>
                                        <span class='detail client-address empty'>N/A</span>
                                    </t>
                                </div>
                            </div>
                        </div>

                        <div class="card card-light v-accounting">
                            <div class="card-header">Account</div>
                            <div class="card-body">
                                <div class='client-detail text-danger' t-if="partner.total_due > 0">
                                    <span class='label'>Due</span>
                                    <span class='detail'><t t-esc='widget.format_currency(partner.total_due || 0)'/></span>
                                </div>
                                <div class="client-detail" t-else="True">
                                    <span class='label'>Balance</span>
                                    <span class='detail'><t t-esc='widget.format_currency(partner.total_due * -1 || 0)'/></span>
                                </div>
                                <div class='client-detail'>
                                    <span class='label'>Credit Limit</span>
                                    <span class='detail'><t t-esc='widget.format_currency(partner.credit_limit || 0)'/></span>
                                </div>
                            </div>
                        </div>
                        <div class="card card-light">
                            <div class="card-header">Diagnosis Summary</div>
                            <div class="card-body">
                                <textarea disabled="disabled" rows="2" cols="40"><t t-raw="partner.diagnosis_summary or ''"/></textarea>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
                <div class='tab-pane fade show' id="order">
                    <table class="table table-striped hover order-table" style="width:100%">
                    </table>
                </div>
                <div class='tab-pane fade show' id="orderlines" t-if="config.enable_show_cust_order_lines">
                    <table class="table table-striped hover orderlines-table" style="width:100%">
                    </table>
                </div>

                <div class='tab-pane fade show' id="patient-packages" t-if="config.allow_package">
                    <table class="table table-striped hover package-table" style="width:100%">
                    </table>
                </div>
                <div class='tab-pane fade show' id='document'>
                    <div class="row">
                        <table class="table-active table-form table">
                            <tr>
                                <td>
                                    <select name="attachment_type" class="custom-select">
                                        <t t-foreach="widget.medical.attachment_types or []" t-as="at">
                                            <option t-att-value="at.id"><t t-esc="at.name"/></option>
                                        </t>
                                    </select>
                                </td>
                                <td>
                                    <div class="custom-file">
                                        <input type="file" class="custom-file-input" name="ufile" id="customFile" />
                                        <label class="custom-file-label" for="customFile">Choose file</label>
                                    </div>
                                </td>
                                <td>
                                    <span class="btn btn-info btn-upload"> Upload </span>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <table class="table table-striped hover document-table" width="100%">
                    </table>
                </div>

                <div class="clearfix touch-scrollable scrollable-y tab-pane fade show" id="complains" t-if="widget.medical.config.enable_complain">
                    <table class="table table-striped hover complain-table" width="100%"/>
                </div>
                <!-- Insurances Tab -->
                <div class="clearfix touch-scrollable scrollable-y tab-pane fade show" id="patient-insurance" t-if="widget.medical.config.enable_insurance">
                    <button role="button" id="add-insurance" class="btn btn-default" action="add">Add Insurance</button>
                    <table class="table table-striped hover insurance-table" width="100%"/>
                </div>
                <!-- History Tab -->
                <div class="clearfix touch-scrollable scrollable-y tab-pane fade show" id="patient-prev-history">
                    <div class="container mt-2">
                        <div class="col font-weight-bold" style="background: white;min-height: 100px;padding: 10px;">
                            <textarea class="disabled" style="width:100%; height: 200px; font-size: 14px" disabled="disabled" readonly="1"><t t-esc="partner.history or ''" /></textarea>
                        </div>
                    </div>
                </div>
                <!-- Blocked by Doctors Tab -->
                <div class="clearfix touch-scrollable scrollable-y tab-pane fade show" id="blocked-by-doctors">
                    <table class="table table-striped hover blocked-by-doctors-table" width="100%"/>
                </div>
                <!-- Advance Payment Tab -->
                <div class="clearfix touch-scrollable scrollable-y tab-pane fade show" id="patient-adv-payment">
                    <div id="patient-adv-payment-table"></div>
                </div>
            </div>
        </section>
    </t>

    <t t-name="AdvPaymentsSection">
        <div class="m-1">
            <div class="form-inline">
                <button class="btn btn-success v-adv-payment-create pull-right">
                    <span class="fa fa-plus"> Create Advance Payment</span>
                </button>
            </div>
            <table class="table table-sm mt-2 table-stripped" t-if="adv_payments">
                <thead>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Name</th>
                            <th>Journal</th>
                            <th>Payment Date</th>
                            <th class="text-right">Amount</th>
                            <th class="text-right">Balance</th>
                            <th>State</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-set="tot_bal" t-value="0" />
                        <t t-set="tot_used" t-value="0" />
                        <tr t-foreach="adv_payments or []" t-as="payment">
                            <td><t t-esc="payment_index + 1" /></td>
                            <td><t t-esc="payment.name" /></td>
                            <td><t t-esc="payment.journal_id and payment.journal_id[1] or ''" /></td>
                            <td><t t-esc="widget.format_date(payment.payment_date)" /></td>
                            <td class="text-right"><t t-esc="widget.format_currency(payment.amount)" /></td>
                            <td class="text-right"><t t-esc="widget.format_currency(payment.payment_balance)" /></td>
                            <td>
                                <button class="btn btn-info print-adv-payment" t-att-data-payment="payment.id" title="Print"><i class="fa fa-print"/> Receipt</button>
                            </td>
                            <t t-set="tot_bal" t-value="tot_bal + payment.payment_balance" />
                            <t t-set="tot_used" t-value="tot_bal + payment.amount" />
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td class="text-right">
                                <strong>Total : </strong>
                            </td>
                            <td class="text-right">
                                <strong t-esc="widget.format_currency(tot_used)" />
                            </td>
                            <td class="text-right">
                                <strong t-esc="widget.format_currency(tot_bal)" />
                            </td>
                            <td></td>
                        </tr>
                    </tfoot>
                </thead>
            </table>
            <t t-else="1">
                <div class="mt-4 alert alert-danger" role="alert">
                    No prepaid card linked with this customer.
                </div>
            </t>
        </div>
    </t>
</templates>
