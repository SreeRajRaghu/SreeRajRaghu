<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="OrderTypeButton">
        <button class="btn btn-default" id="js_visit_type">
            <i class='fa fa-link js_icon' /> <span class="js_name">Visit Type</span>
        </button>
    </t>

    <t t-name="PricelistListBtn">
        <button class="btn btn-default" id="js_pricelist">
            <i class='fa fa-file js_icon' /> <span class="js_name">Pricelist</span>
        </button>
    </t>

    <t t-name="PopupRegisterPayment">
        <div class="modal-dialog">
            <t t-set="partner" t-value="widget.partner" />
            <t t-set="order" t-value="widget.order or widget.options.order" />
            <div class="popup" style="height: 75%">
                <div class="container">
                    <div class="card v-payment-method mt-2">
                        <div class="card-header" t-if="partner">
                            <h5 class="mb-0 text-left">
                                <t t-esc="widget.label_list['partner_id']" />: <strong><t t-esc="partner.name" /></strong>
                            </h5>
                            <div class="text-left" style="font-size: 15px;">
                                Ref: <strong><t t-esc="order.name or widget.options.ref or ''" /></strong>
                            </div>
                        </div>

                        <div class="card-body pt-1 h-100">
                            <div class="row" t-if="order">
                                <div class="input-group">
                                    <div class="input-group-prepend w-50">
                                        <span class="input-group-text w-100">
                                            Amount To Pay
                                        </span>
                                    </div>
                                    <div class="form-control text-danger text-right">
                                        <span class="v-total-pay"><t t-esc="widget.format_currency(widget.amount_total)" /></span>
                                    </div>
                                </div>
                            </div>

                            <div class="row" t-if="order">
                                <div class="input-group">
                                    <div class="input-group-prepend w-50">
                                        <span class="input-group-text w-100 bg-success text-white">
                                            Amount Paid
                                        </span>
                                    </div>
                                    <div class="form-control text-success text-right">
                                        <span class="v-total-paid"><t t-esc="widget.format_currency(order.amount_paid)" /></span>
                                    </div>
                                </div>
                            </div>

                            <div class="row mb-4" t-if="order">
                                <div class="input-group">
                                    <div class="input-group-prepend w-50">
                                        <span class="input-group-text w-100"
                                            style="background: #17a2b8; color: white;">
                                            Amount Due
                                        </span>
                                    </div>
                                    <div class="form-control text-right bg-warning text-danger">
                                        <span class="v-total-due"><t t-esc="widget.format_currency(widget.amount_total - order.amount_paid)" /></span>
                                    </div>
                                </div>
                            </div>
                            <t t-foreach="widget.medical.cashregisters or []" t-as="journal">
                                <div class="row">
                                    <div class="input-group v-payment-line">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">
                                                <t t-esc="journal.name" />
                                            </span>
                                        </div>
                                        <input style="width: 20%"
                                            type="number"
                                            min="0"
                                            t-att-name="journal.id"
                                            class="form-control text-left v-cash-register"
                                            placeholder="Amount"/>
                                         <input  style="width: 20%"
                                            t-if="journal.need_ref"
                                            type="text"
                                            class="form-control v-cash-ref"
                                            placeholder="Reference"/>
                                    </div>
                                </div>
                            </t>
                        </div>
                    </div>
                </div>
                <div class="p-2">
                    <span type="button" class="btn btn-success v-payment-register">
                        Register Payment<!--  &amp; Print -->
                    </span>
                    <span type="button" class="btn btn-danger v-payment-reset">
                        Reset
                    </span>
                    <span type="button" class="btn btn-info cancel">
                        Close
                    </span>
                    <!-- <span type="button" class="btn btn-primary d-print-order-payment">
                        Print
                    </span> -->
                </div>
            </div>
        </div>
    </t>

    <t t-name="InsuranceCoverPopupWidget">
        <div role="dialog" class="modal-dialog">
            <div class="popup popup-max-width text-left p-1" style="height: 85%">
                <header class="title">
                    <t t-set="card" t-value="widget.options.insurance_card or {}" />
                    <div t-if="card" class="row">
                        <div class="col-8">
                            <t t-esc="card.name" />
                            <small style="font-size: 10px">
                                <t t-esc="widget.format_date(card.issue_date)" />
                                - <t t-esc="widget.format_date(card.issue_date)" />
                            </small>
                            <br />
                            <!-- <p>
                                <strong>Main Company :</strong> <t t-esc="card and card.main_company_id and card.main_company_id[1] or ''"/>
                            </p> -->
                            <div style="font-size: 14px;">
                                <strong>Insurance Company: </strong>
                                <t t-esc="card.insurance_company_id and card.insurance_company_id[1] or ''" />
                                <br />
                                <strong>Scheme: </strong><t t-esc="card.pricelist_id and card.pricelist_id[1] or ''" />
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="pull-right btn btn-secondary v-add-card">
                                <i class="fa fa-plus " />
                                Add New
                            </div>
                            <div class="pull-right btn btn-warning mr-1 v-change-card">
                                <i class="fa fa-pencil" />
                                Change Card
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <t t-set="order" t-value="widget.medical.get_order()" />
                        <div class="col-3">
                            <strong style="font-size: 12px;">Incident / SSNBR / Approval</strong>
                            <input type="text" class="form-control ins-ref-text" name="ins_approval_no" t-att-value="order and order.ins_approval_no or ''"/>
                        </div>
                        <div class="col-3">
                            <strong style="font-size: 12px;">Auth / MCN / Ticket</strong>
                            <input type="text" class="form-control ins-ref-text" name="ins_ticket_no" t-att-value="order and order.ins_ticket_no or ''"/>
                        </div>
                        <div class="col-3">
                            <strong style="font-size: 12px;">Reference / PreInvoice</strong>
                            <input type="text" class="form-control ins-ref-text" name="ins_ref" t-att-value="order and order.ins_ref or ''"/>
                        </div>
                        <div class="col-3">
                            <strong style="font-size: 12px;">Member ID</strong>
                            <input type="text" class="form-control ins-ref-text" name="ins_member" t-att-value="order and order.ins_member or ''"/>
                        </div>
                    </div>
                </header>
                <div class="m-0 ins-check-body" t-if="widget.options and widget.options.orderlines" style="overflow-x: auto; height: 300px;">
                    <table class="table m-0 table-ins-check v-normal-input table-striped">
                        <thead>
                            <tr>
                                <th width="40px;">Code</th>
                                <th>Service</th>
                                <th class="text-right" width="12%">Actual Price</th>
                                <th class="text-right" width="15%">Approved Price</th>
                                <th class="text-right" width="10%">Qty</th>
                                <th class="text-right" width="12%">Ins.Claim</th>
                                <th class="text-right" width="12%">Deductible <span class="btn btn-secondary btn-sm ml-2 v-upd-deductible">Check</span></th>
                                <th class="text-right" width="12%">Payable</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- <t t-foreach="widget.options.result_lines or []" t-as="line">
                                <t t-call="InsCoverLine" />
                            </t> -->
                        </tbody>
                        <tfoot>
                            <tr style="background: lightgray">
                                <th />
                                <th />
                                <th class="text-right tot_actual"></th>
                                <th class="text-right tot_approved"></th>
                                <th class="text-right tot_approved_qty"></th>
                                <th class="text-right tot_ins_claim"></th>
                                <th class="text-right tot_patient_share"></th>
                                <th class="text-right tot_payable"></th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div class="footer">
                    <div class="button confirm">
                        Confirm
                    </div>
                    <div class="button cancel">
                        Close
                    </div>
                </div>
            </div>
        </div>
    </t>

    <t t-name="InsuranceCoverPopupWidget.InsCoverLine">
        <tr t-att-data-itemid="line.result.pricelist_item_id"
            t-att-data-product="line.product.id"
            t-att-data-qty="line.qty"
            t-att-data-price_unit="line.result.price_unit">
            <td>
                <t t-esc="line.product.default_code" />
            </td>
            <td>
                <label class="ml-2">
                    <t t-if="line.is_checked">
                        <input type="checkbox" class="form-control is_insurance_applicable" name="is_insurance_applicable" value="1" checked="1"/>
                    </t>
                    <t t-else="1">
                        <input type="checkbox" class="form-control is_insurance_applicable" name="is_insurance_applicable"/>
                    </t>
                    <t t-esc="line.product.display_name" />
                    <span t-if="line.result.pricelist_item_id" class="badge badge-success pull-right">Applied</span>
                </label>
            </td>
            <td class="text-right">
                <span class="price_unit_orig form-control-plaintext">
                    <t t-esc="widget.format_currency_no_symbol(line.result.price_unit_orig)" />
                </span>
            </td>
            <td class="text-right">
                <input type="number" name="approved_price_unit" t-att-value="line.result.approved_price_unit" class="form-control approved_price_unit" min="0" step="0.001"/>
            </td>
            <td class="text-right">
                <span class="form-control-plaintext quantity" t-att-data-quantity="line.qty">
                    <t t-esc="line.qty or 1" />
                </span>
            </td>
            <td class="text-right">
                <span class="form-control-plaintext ins_price_unit" t-att-data-ins_price_unit="line.result.price_unit">
                    <t t-esc="widget.format_currency_no_symbol(line.result.ins_price_unit * line.qty)" />
                </span>
            </td>
            <td class="text-right">
                <span class="form-control-plaintext price_unit" t-att-data-price_unit="line.result.price_unit">
                    <t t-esc="widget.format_currency_no_symbol(line.result.price_unit * line.qty)" />
                </span>
            </td>
            <td class="text-right">
                <span class="form-control-plaintext payable_price_unit" t-att-data-price_unit="line.result.payable_price_unit">
                    <t t-esc="widget.format_currency_no_symbol(line.result.payable_price_unit * line.qty)" />
                </span>
            </td>
        </tr>
    </t>

    <t t-name="SelectInsurancePopupWidget">
        <div role="dialog" class="modal-dialog">
            <div class="popup popup-max-width text-left p-1">
                <header class="title">
                    Select Insurance Card
                    <span class="pull-right btn btn-secondary v-add-card">
                        <i class="fa fa-plus " />
                        Add New
                    </span>
                </header>
                <div class="m-0" style="overflow-x: auto; height: 300px;">
                    <t t-foreach="widget.options.insurance_cards or []" t-as="card">
                    <div class="card collapsed-card" t-if="card">
                        <div class="card-header">
                            <div class="card-title">
                                <t t-esc="card.name" />
                                <small style="font-size: 10px">
                                    <t t-esc="widget.format_date(card.issue_date)" />
                                    - <t t-esc="widget.format_date(card.expiry_date)" />
                                </small>
                            </div>
                            <div class="card-tools">
                                <div class="btn btn-secondary confirm" t-att-data-insurance="card.id">
                                    Apply
                                </div>
                                <div type="button" class="btn btn-tool" data-card-widget="collapse" data-toggle="tooltip" title="Collapse">
                                    <i class="fa fa-plus"></i>
                                </div>
                            </div>
                        </div>
                        <div class="card-body p-1" style="display: none">
                            <table class="table m-0 no-border" style="font-size: 12px;">
                                <tr t-if="card">
                                    <th width="15%">Insurance Company</th>
                                    <td width="35%">
                                        <t t-esc="card.main_company_id[1]"/>
                                        <br />
                                        <t t-esc="card.insurance_company_id[1]" />
                                    </td>
                                    <th width="15%">Scheme</th>
                                    <td>
                                        <t t-esc="card.pricelist_id[1]" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    </t>
                </div>
                <div class="footer">
                    <div class="button cancel">
                        Close
                    </div>
                </div>
            </div>
        </div>
    </t>

    <t t-name="CreateInsurancePopupWidget">
        <div role="dialog" class="modal-dialog">
            <div class="popup text-left popup-normal-text">
                <header class="title">Create Insurance Card</header>
                <div class="m-0 p-2" style="height:70%; overflow-y: auto; height: 325px;">
                    <t t-set="card" t-value="widget.card || widget.options.card || {}" />
                    <form class="v-normal-input">
                        <div class="row">
                            <label class="col-sm-2 col-form-label">Card No/Name</label>
                            <div class="col-sm-10">
                                <input type="hidden" name="id" class="v-int" t-if="card and card.id" t-att-value="card.id" />
                                <input type="text" name="name" required="1" class="form-control" t-att-value="card.name || ''" placeholder="Card No/Name"/>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-6">
                                <label for="issue_date">Issue Date:</label>
                                <input id="issue_date" name="issue_date" type='date'
                                    class='form-control w-100' t-att-value="card.issue_date || ''"/>
                            </div>
                            <div class="col-6">
                                <label for="expiry_date">Expiry Date:</label>
                                <input id="expiry_date" name="expiry_date" type='date'
                                    class='form-control w-100' t-att-value="card.expiry_date || ''"/>
                            </div>
                        </div>

                        <div class="row">
                            <label class="col-sm-2" for="main_company_id">Main Company:</label>
                            <div class="col-sm-10">
                                  <input id="main_company_id" name="main_company_id" type='text'
                                        required="1" class='form-control v-int main_company_id'
                                        t-att-value="card.main_company_id &amp;&amp; card.main_company_id[1] || ''"/>
                            </div>
                        </div>
                        <div class="row">
                            <label class="col-sm-2" for="insurance_company_id">Insurance Company:</label>
                            <div class="col-sm-10">
                                <input id="insurance_company_id" name="insurance_company_id" type='text'
                                        required="1" class='form-control v-int insurance_company_id'
                                        t-att-value="card.insurance_company_id &amp;&amp; card.insurance_company_id[1] || ''"/>
                            </div>
                        </div>
                        <div class="row">
                            <label class="col-sm-2" for="pricelist_id">Scheme:</label>
                            <div class="col-sm-10">
                                <input id="pricelist_id" name="pricelist_id" type='text'
                                        required="1" class='form-control v-int pricelist_id'
                                        t-att-value="card.pricelist_id &amp;&amp; card.pricelist_id[1] || ''"/>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="footer">
                    <div class="button confirm">
                        <t t-if="card and card.id">
                            Update
                        </t>
                        <t t-else="1">
                            Create
                        </t>
                    </div>
                    <div class="button cancel">
                        Close
                    </div>
                </div>
            </div>
        </div>
    </t>

    <t t-name="ProductList">
        <t t-foreach="widget.product_list and widget.product_list.slice(0, product_list_limit or widget.product_list_limit) or []" t-as="product">
            <t t-call="Product" />
        </t>
    </t>

    <t t-name="Product">
        <article class='col-auto v-product-box' t-if="product" t-att-data-product="product.id" t-att-data-categ="product.medical_categ and product.medical_categ.id" tabindex="0" t-attf-aria-labelledby="article_product_#{product.id}" t-att-title="product.display_name" t-att-data-search="widget.medical.db._product_search_string(product)">
            <div class="v-product">
                <div class="product-img">
                    <t t-set="image_url" t-value="'/web/image/product.product/' +product.id + '/image_128/150x100'" />
                    <img t-att-src='image_url' t-att-alt="product.display_name"/>
                    <span class="price-tag">
                        <t t-esc="widget.format_currency(product.get_price(pricelist, 1),'Medical Price')"/>
                    </span>
                    <span class="duration-tag fa fa-clock-o" t-if="product.is_medical_service and product.duration">
                        <t t-esc="widget.floatToHour(product.duration)" />
                    </span>

                    <span class="duration-tag v-info-tag fa fa-info-circle" t-if="product.description" t-att-title="product.description" />
                </div>
                <div class="product-name" t-attf-id="article_product_#{product.id}">
                    [<t t-esc="product.default_code"/>] <t t-esc="product.display_name"/>
                </div>
            </div>
        </article>
    </t>

    <t t-name="Session.Category">
        <div t-attf-class="btn btn-info js_select_categ #{categ_id == 'active'}" t-att-data-categ_id="categ_id">
            <t t-if="categ_id == 0">
                <span class="fa fa-home" />
            </t>
            <t t-else="1">
                <span><t t-esc="categ_by_id[categ_id].name" /></span>
            </t>
        </div>
    </t>

    <t t-name="OrderWidget.Orderline">
        <li t-attf-class="orderline #{ line.selected ? (line.order.is_readonly) ? 'read-selected' : 'selected' : '' }">
            <span class="product-name">
                [<t t-esc="line.get_product().default_code"/>] <t t-esc="line.get_product().display_name"/>
                <t t-if="line.get_product().tracking !== 'none'">
                    <i class="oe_link_icon fa fa-list oe_icon line-lot-icon oe_green"
                       aria-label="Valid product lot" role="img" title="Valid product lot"/>
                    <i class="oe_link_icon fa fa-list oe_icon line-lot-icon oe_red"
                       aria-label="Invalid product lot" role="img" title="Invalid product lot"/>
                </t>
            </span>
            <span class="price">
                <span class="fa fa-info text-yellow text-lg" t-if="line.is_insurance_applicable and line.pricelist_item_id" title="Insurance Applied"/>
                <t t-esc="widget.format_currency(line.get_display_price())"/>
            </span>
            <ul class="info-list">
                <t t-if="line.get_quantity_str() !== '1' || line.selected ">
                    <t t-set="is_readonly" t-value="line and line.order and line.order.is_readonly" />
                    <li class="info">
                        <div>
                            <span class="btn btn-xs btn-danger fa fa-minus"/>
                            <t t-if="widget.medical.config.enable_qty">
                                <em>
                                    <t t-esc="line.get_quantity_str()" />
                                </em>
                                <t t-esc="line.get_unit().name" />
                                <span class="btn btn-xs btn-success fa fa-plus" />
                                at
                            </t>
                            <t t-if="line.display_discount_policy() == 'without_discount' &amp;&amp;
                                line.get_unit_display_price() != line.get_lst_price()">
                                <s>
                                    <t t-esc="widget.format_currency(line.get_fixed_lst_price(),'Medical Price')" />
                                </s>
                                <t t-esc="widget.format_currency(line.get_unit_display_price(),'Medical Price')" />
                            </t>
                            <t t-else="">
                                <t t-esc="widget.format_currency(line.get_unit_display_price(),'Medical Price')" />
                            </t>
                            <t t-if="widget.medical.config.enable_qty">
                                /
                                <t t-esc="line.get_unit().name" />
                            </t>
                            <span class="pull-right">
                                <!-- <span class="btn btn-xs btn-info fa fa-internet-explorer v-emp-change" /> -->
                                <span class="btn btn-xs btn-info fa fa-money v-price-change" t-if="widget.medical.config.allow_price_change" />

                                <span class="btn btn-xs fa v-sample-desc fa-info-circle btn-warning" t-if="line.get_product().description" t-att-title="line.get_product().description" />

                                <span class="btn btn-xs btn-primary fa fa-percent" />
                                <span class="btn btn-xs btn-primary fa fa-tasks v-content-handle" />
                            </span>
                        </div>
                        <div class="v-other-content" style="display:none">
                            <t t-set="empty_msg" t-value="True" />
                            <div>
                                <t t-if="line.duration and line.is_medical_service">
                                    <t t-set="empty_msg" t-value="False" />
                                    <span class="btn badge badge-info v-line-duration">
                                        <i class="fa fa-clock-o" /> 
                                        <t t-esc="widget.floatToHour(line.duration)" />
                                    </span>
                                </t>
                                <t t-if="line.get_session_count() > 1">
                                    <t t-set="empty_msg" t-value="False" />
                                    <span class="btn badge badge-primary v-line-sessions">
                                        <i class="fa fa-calendar-check-o" />
                                        <t t-esc="line.get_session_count()" /> Sessions
                                    </span>
                                </t>
                            </div>
                            <div class="btn btn-outline-primary v-line-analytic-account" t-if="widget.medical.config.enable_line_analytics">
                                <!--  t-if="line.analytic_tag_ids and line.analytic_tag_ids.length > 0" -->
                                <t t-set="empty_msg" t-value="False" />
                                Analytic Account:
                                <t t-set="analytic_acc" t-value="line.get_analytic_acc_display()" />
                                <span t-if="analytic_acc" class="badge badge-pill badge-success">
                                    <t t-esc="analytic_acc" />
                                </span>
                                <!-- <t t-foreach="line.analytic_tag_ids" t-as="_id">
                                    <span class="badge badge-pill badge-success">
                                        <t t-esc="line.analytic_account_id and widget.medical.analytic_account_by_id[line.analytic_account_id]" />
                                    </span>
                                </t> -->
                            </div>
                            <div class="btn btn-outline-secondary v-line-analytic-tags" t-if="widget.medical.config.enable_line_analytics">
                                <!--  t-if="line.analytic_tag_ids and line.analytic_tag_ids.length > 0" -->
                                <t t-set="empty_msg" t-value="False" />
                                Analytic Tags:
                                <t t-set="analytic_tags" t-value="line.get_analytic_tag_display() || []" />
                                <span t-foreach="analytic_tags or []" t-as="tag" class="badge badge-pill badge-success">
                                    <t t-esc="tag" />
                                </span>
                                <!-- <t t-foreach="line.analytic_tag_ids" t-as="_id">
                                    <span class="badge badge-pill badge-success">
                                        <t t-esc="widget.medical.analytic_tag_by_id[_id].name" />
                                    </span>
                                </t> -->
                            </div>
                            <div>
                                <div class="btn btn-outline-primary v-line-employee" t-if="widget.medical.config.enable_line_select_emp">
                                    <t t-set="empty_msg" t-value="False" />
                                    Doctor:
                                    <t t-set="emp" t-value="line.get_line_employee()" />
                                    <span t-if="emp" class="badge badge-pill badge-success">
                                        <t t-esc="emp.name" />
                                    </span>
                                </div>
                            </div>
                            <div t-if="widget.medical.config.allow_multi_appointments">
                                <div class="btn bg-danger v-line-multi">
                                    <t t-set="empty_msg" t-value="False" />
                                    Multi:
                                    <t t-raw="line.get_multi_data_display()" />
                                </div>
                            </div>
                            <div t-if="widget.medical.config.enable_line_consumable">
                                <div class="btn btn-outline-success v-line-consumable">
                                    <t t-set="empty_msg" t-value="False" />
                                    Consumables:
                                    <t t-raw="line.get_consumable_display()" />
                                </div>
                            </div>

                            <div style="font-size: 13px;" t-if="line.is_insurance_applicable and line.pricelist_item_id">
                                <t t-set="empty_msg" t-value="False" />
                                <!-- Insurance Details -->
                                <div>
                                    <strong>Actual Price</strong>: <span><t t-esc="line.price_unit_orig" /></span>
                                    <span class="ml-4" />
                                    <strong>Approved Price</strong>: <span><t t-esc="line.approved_price_unit" /></span>
                                </div>
                                <div>
                                    <strong>Unit Price</strong>: <span><t t-esc="line.price" /></span>
                                    <span class="ml-4" />
                                    <strong>Ins. Price</strong>: <span><t t-esc="line.ins_price_unit" /></span>
                                </div>
                                <div>
                                    <strong>Payable</strong>: <span><t t-esc="line.payable_price_unit" /></span>
                                </div>
                            </div>
                            <t t-if="empty_msg">
                                <p>No further details available.</p>
                            </t>
                        </div>
                    </li>
                </t>
                <t t-if="line.get_discount_str() !== '0'">
                    <li class="info">
                        With a
                        <em>
                            <t t-esc="line.get_discount_str()" />
                        </em>
                        discount
                    </li>
                </t>
            </ul>
        </li>
    </t>

    <t t-name="OrderWidget">
        <div class="card v-orderline v-box">
            <div class="card-header">
                <div class="card-title">
                    <div class="order">
                        <t t-if="orderlines.length > 0">
                            <div class="summary clearfix">
                                <div class="line">
                                    <div class='entry total'>
                                        <span class="">Total: </span> <strong class="value">0.00</strong>
                                        <!-- <div class='subentry'>Taxes: <span class="value">0.00â‚¬</span></div> -->
                                    </div>
                                </div>
                                <!-- <div class="line">
                                    <div class='v-amount-paid' style="font-size: 15px">
                                        <span class="">Amount Paid: </span>
                                        <strong class="value">0.00</strong>
                                        <span class="fa fa-tasks" title="Payment Details" />
                                    </div>
                                </div> -->
                                <div class="line" style="font-size: 12px;">
                                    <div class="v-duration">
                                        Duration:
                                        <strong class="value">00:00</strong>
                                    </div>
                                </div>
                                <div class="line" style="font-size: 12px;">
                                    <div class="v-services">
                                        Services:
                                        <strong class="value">0</strong>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </div>
                </div>
                <div class="card-tools">
                    <div t-if="widget.medical and widget.medical.config and widget.medical.config.enable_insurance" class="btn btn-outline-info v-insurance-check">Check Insurance</div>
                    <div type="button" class="btn btn-tool" data-card-widget="collapse" data-toggle="tooltip" title="Collapse">
                        <i class="fa fa-minus"></i>
                    </div>
                </div>
            </div>
            <div class="card-body v-orderline-container">
                <t t-if="orderlines.length === 0" >
                    <div class='order-empty text-center'>
                        <i class='fa fa-shopping-cart' role="img" aria-label="Shopping cart" title="Shopping cart"/>
                        <h1>No Services.</h1>
                    </div>
                </t>
                <ul class="orderlines"></ul>
            </div>
        </div>
        <!-- </div> -->
    </t>

    <t t-name="AppointmentScreenWidget">
        <div class="appointment-screen screen p-1">
            <div class="container-fluid">
                <div class="row v-box-container" id="v_appointment_container">
                    <div class="col-12 col-md-6 v-box v-product-list-container">
                        <!-- <div class="v-product-list-container"> -->
                            <div class="card">
                                <div class="card-header">
                                    <div class="card-title">
                                        <div class="v-btn-categories w-100 mb-2">
                                            <t t-set="categ_by_id" t-value="widget.medical.db.category_by_id" />
                                            <t t-foreach="categ_by_id or []" t-as="categ_id">
                                                <t t-if="_.isEmpty(categ_by_id[categ_id].parent_id)">
                                                    <t t-call="Session.Category" />
                                                </t>
                                            </t>
                                        </div>
                                        <div class="v-btn-child-categs w-100 mb-2">
                                        </div>
                                    </div>
                                    <div class="card-tools" style="display: inline-flex;">
                                        <div class="input-group input-group-sm searchbox" style="margin: 0px;">
                                            <input type="text" class="form-control js_product_search" style="height: inherit;" placeholder="Search product" t-att-value="widget.search_word or ''" tabindex="0"/>
                                            <div class="input-group-append">
                                                <div class="btn btn-outline-secondary js_product_clear_search">
                                                  <i class="fa fa-times"></i>
                                                </div>
                                                <div class="btn btn-primary">
                                                  <i class="fa fa-search"></i>
                                                </div>
                                            </div>
                                        </div>
                                        <div type="button" class="btn" data-card-widget="collapse" data-toggle="tooltip" title="Collapse">
                                            <i class="fa fa-minus"></i>
                                        </div>
                                    </div>
                                </div>
                                <t t-set="pricelist" t-value="widget.medical.default_pricelist" />
                                <div class="card-body product-list-container">
                                    <div class="row m-0" id="product-list">
                                    </div>
                                </div>
                            </div>
                        <!-- </div> -->
                    </div>
                    <div class="col-12 col-md-6 v-order-container">
                        <div class="card v-box">
                            <div class="card-header">
                                <div id="order_details">
                                    <div type="button" class="btn btn-outline-success v-maximize">
                                        <i class="fa fa-arrow-left"></i>
                                    </div>
                                </div>
                                <div class="card-tools">
                                    <h4>
                                        <span id="span_order_name"></span>
                                    </h4>
                                    <button id="v-validate" class="btn btn-primary v-validate">
                                        Pay
                                    </button>
                                    <!-- <button class="btn btn-danger v-cancel">
                                        Cancel
                                    </button>
                                    <button class="btn btn-info v-reset">
                                        Reset to Draft
                                    </button> -->
                                    <button id="v-save" class="btn btn-success v-save">
                                        Save
                                    </button>
                                    <!-- <button id="v-multi" class="btn btn-success v-multi" style="display: none">
                                        Create Multi
                                    </button> -->
                                    <button class="btn btn-default v-close">
                                        Close
                                    </button>
                                    <div type="button" class="btn btn-tool" data-card-widget="collapse" data-toggle="tooltip" title="Collapse">
                                        <i class="fa fa-minus"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body v-order-control">
                                <!-- <t t-set="order" t-value="widget.medical.get_order()" /> -->
                                <button class="btn btn-default js_order_patient">
                                    <span class="fa fa-address-book-o" />
                                    <span id="span_order_patient">
                                        <t t-esc="widget.label_list['partner_id']" />
                                        <!-- <t t-esc="order and order.get_patient_name() || 'Patient'" /> -->
                                    </span>
                                </button>
                                <button class="btn btn-default js_order_start_time">
                                    <span class="fa fa-calendar" />
                                    <span id="span_order_start_time">
                                        Date/Time
                                    </span>
                                </button>
                                <button class="btn btn-default js_order_resource">
                                    <span class="fa fa-user-md" />
                                    <span id="span_order_resource">
                                        <t t-esc="widget.label_list['resource_id']" />
                                    </span>
                                </button>
                                <!-- <button class="btn btn-default js_payment">
                                    <span class="fa fa-credit-card" />
                                    Payment
                                </button> -->
                                <button class="btn btn-default js_clinic" t-if="widget.medical.config.show_branch_selection">
                                    <span class="fa fa-building" />
                                    <span id="span_clinic">
                                        <t t-esc="widget.label_list['clinic_id']" />
                                    </span>
                                </button>

                                <button class="btn btn-default js_visit_type" t-if="widget.medical.visit_options">
                                    <span class="fa fa-link" />
                                    <span id="span_visit_type">
                                        Visit Type
                                    </span>
                                </button>

                                <!-- <button class="btn btn-default js_ref_doctor">
                                    <span class="fa fa-doctor-o" />
                                    <span id="span_doctor">
                                        Referred By
                                    </span>
                                </button> -->
                            </div>
                        </div>
                        <div id="js_order_widget" />
                    </div>
                </div>
            </div>
        </div>
    </t>

    <t t-name="ReportSelection">
        <div class="input-group v-report">
            <select  class="form-control v-report-selection" placeholder="Input group example" aria-label="Input group example" aria-describedby="btnGroupAddon">
                <option t-foreach="widget.report_list" t-as="report" t-att-value="report.rep_id">
                    <t t-esc="report.name" />
                </option>
            </select>
            <div class="input-group-append">
              <div class="btn btn-warning btn-app-print" title="Print Reports">
                    <span class="fa fa-print">
                        Print
                    </span>
                </div>
            </div>
        </div>
    </t>

    <t t-name="PopupOrderDetails">
        <div class="modal-dialog">
            <div class="popup popup-order-details">
                <t t-set="order" t-value="widget.options.order"/>
                <div class="title">
                    <t t-esc="widget.options.title || '' "/>
                    <t t-if="order and order.state">
                        <span t-attf-style="color: #{widget.getColor(order.state)}"> (<t t-esc="widget.medical.chrome.state_display[order.state]"/>)</span>
                    </t>
                    <div class="pull-right">
                        <!-- <button class="btn v-order-done">
                            <span class="fa fa-check-square fa-2x text-success" />
                        </button> -->
                        <!-- <button class="v-tip-button btn btn-light v-order-print text-info"
                                data-tip="Print Appointment" t-att-data-order="order and order.id">
                                <span class="fa fa-print"/>
                        </button> -->
                        <div style="display: inline-block;">
                            <t t-call="ReportSelection" />
                        </div>
                        <button class="btn cancel">
                            <span class="fa fa-times text-danger"/>
                        </button>
                    </div>
                </div>

                <div class="container popup-order-body">
                    <div class="row appointment-state">
                        <div class="col-md-12">
                            <div class="btn-group pull-right" role="group">
                                <t t-set="state_display" t-value="widget.chrome.state_display or {}" />
                                <t t-foreach="_.keys(state_display)" t-as="k">
                                    <span t-att-data-state="k" class="btn btn-secondary btn-state"
                                      t-attf-style="border-bottom-color: #{widget.getColor(k)}; border-bottom-width: medium;">
                                          <t t-esc="state_display[k]" />
                                      </span>
                                </t>
                            </div>
                        </div>
                    </div>
                    <div class="v-tip-partner-details mt-2 ml-2" t-if="order and order.partner_id">
                        <t t-set="partner" t-value="order.partner or {}" />
                        <div class="row" t-if="partner">
                            <div class="col-8">
                                <h3 style="border-bottom: 1px solid black;">
                                    <t t-esc="partner.name"/>
                                    <small style="font-size: 14px" class="badge badge-warning" t-if="order.visit_type">
                                        <span class="fa fa-link" />
                                        <t t-esc="widget.visit_type_display[order.visit_type]" />
                                    </small>
                                    <small class="badge badge-warning" style="font-size: 13px;" t-if="order.invoice_number">
                                        Invoiced #<t t-esc='order.invoice_number' />
                                    </small>
                                </h3>
                                <div class="row m-0">
                                    <table class="v-tip-table col-6">
                                        <tr>
                                            <th style="width: 30%">
                                                <span class="mr-1 fa fa-file-powerpoint-o"/>
                                                <t t-esc="widget.get_file_label()" /> :
                                            </th>
                                            <td>
                                                <span t-esc="partner[widget.get_config_file_key()] or '-'" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <th><span class="mr-1 fa fa-phone" />
                                                Phone :</th>
                                            <td><span t-esc="partner.phone or '-'" /></td>
                                        </tr>
                                        <tr>
                                            <th><span class="mr-1 fa fa-mobile" />
                                                Mobile :</th>
                                            <td><span t-esc="partner.mobile or '-'" /></td>
                                        </tr>
                                        <tr t-if="partner.civil_code">
                                            <th><span class="mr-1 fa fa-address-card" />
                                                Civil ID :</th>
                                            <td><span t-esc="partner.civil_code or '-'" /></td>
                                        </tr>
                                        <tr t-if="partner.passport_no">
                                            <th><span class="mr-1 fa fa-address-card" />
                                                Passport :</th>
                                            <td><span t-esc="partner.passport_no or '-'" /></td>
                                        </tr>
                                    </table>
                                    <table class="v-tip-table col-6">
                                        <tr>
                                            <th style="width: 38%">
                                                <span class="mr-1 fa fa-user-md" />
                                                <t t-esc="widget.label_list['resource_id']" /> :
                                            </th>
                                            <td>
                                                <span t-esc="order.resource_id and order.resource_id[1] or '-'" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>
                                            <span class="mr-1 fa fa-calendar" />
                                                Date/Time :</th>
                                            <td><span t-esc="widget.medical.chrome.format_datetime(new Date(order.start_time), true) or ''" /></td>
                                        </tr>
                                        <tr>
                                            <th>
                                            <span class="mr-1 fa fa-building" />
                                                <t t-esc="widget.label_list['clinic_id']" /> :</th>
                                            <td><span t-esc="order.clinic_id and order.clinic_id[1] or ''" /></td>
                                        </tr>
                                    </table>
                                </div>
                                <table class="table table-sm m-0" t-if="order.insurance_data and order.insurance_data.name">
                                    <t t-set="ins_data" t-value="order.insurance_data" />
                                    <tr>
                                        <th style="width: 20%"><span class="mr-1 fa fa-bookmark" />
                                            Insurance :
                                        </th>
                                        <td>
                                            <t t-if="ins_data.insurance_company_id">
                                                <t t-if="ins_data.insurance_company_id">
                                                    <span t-esc="ins_data.insurance_company_id[1]" />
                                                </t>
                                            </t>
                                            <t t-if="ins_data.pricelist_id">
                                                <br />
                                                <strong>Scheme:</strong> <t t-esc="ins_data.pricelist_id[1]" />
                                            </t>
                                            <t t-if="ins_data.name">
                                                <br />
                                                <strong>Card No:</strong> <t t-esc="ins_data.name" />
                                            </t>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div class="col-4" style="padding-top: 20px; border-left: ">
                                <button class="btn btn-link" t-att-data-tip="'Edit ' + widget.label_list['partner_id']" t-att-title="'Edit ' + widget.label_list['partner_id']">
                                    <span t-att-data-partner-id="partner.id"
                                          class="fa fa-edit v-partner-edit  text-primary"/>
                                </button>
                                <button class="btn btn-link show-appointments" data-tip="Show Appointments"
                                        title="Appointments">
                                    <span t-att-data-partner-id="partner.id" class="fa fa-calendar text-success"/>
                                </button>
                                <!-- <button class="btn btn-link create-reminder" title="Reminder">
                                    <span t-att-data-order-id="order.id" class="fa fa-bell text-info"/>
                                </button> -->
                                <!-- <button class="btn btn-link log-handover-file-on" title="Log Handover File" t-if="widget.medical.config.company_code == 'pcr'">
                                    <span t-att-data-order-id="order.id" class="fa fa-hand-lizard-o text-primary"/>
                                </button> -->
                                <button class="btn btn-link log-print-file-on" title="Log Print File">
                                    <span t-att-data-order-id="order.id" class="fa fa-print text-primary"/>
                                </button>
                                <br/>
                                <span class="btn btn-outline-danger mt-1 v-credit-payment" title="Customer Balance/Due">
                                    <t t-if="partner.total_due > 0">
                                        Due: <t t-esc="widget.format_currency(partner.total_due)"/>
                                    </t>
                                    <t t-else="">
                                        Bal: <t t-esc="widget.format_currency(partner.total_due * -1)"/>
                                    </t>
                                </span>
                                <input type="number" class="btn sequence-no" t-att-value="order.sequence_no || 1" min="1" max="20" style="width: 50px; text-align: center; min-height: 25px !important; height: 33px;" title="Sequence number"/>
                                <button class="btn btn-link btn-rearrange-sequence" title="Rearrange sequence for afterwards appointments">
                                    <span t-att-data-order-id="order.id" class="fa fa-sort-numeric-asc text-primary"/>
                                </button>
                                <div t-if="order.is_followup" class="mt-2">
                                    <span class="badge badge-primary">Follow-Up Appointment</span>
                                </div>
                                <div class="mt-2" t-if="order.date_arrived or order.date_in or order.date_out">
                                    <div class="d-inline-block p-2" style="border: 1px solid powderblue">
                                        <div t-if="order.date_arrived" t-att-title="widget.medical.chrome.format_datetime(order.date_arrived,true)">
                                            <strong>Arrived At: </strong>
                                            <t t-esc="widget.medical.chrome.format_time(order.date_arrived,true)" />
                                        </div>
                                        <div t-if="order.date_in" t-att-title="widget.medical.chrome.format_datetime(order.date_in,true)">
                                            <strong>In: </strong>
                                            <t t-esc="widget.medical.chrome.format_time(order.date_in,true)" />
                                        </div>
                                        <div t-if="order.duration_in_arrived" title="(HH:MM) = In - Arrived">
                                            <strong>Waiting Time: </strong>
                                            <t t-esc="widget.medical.chrome.floatToHour(order.duration_in_arrived/60)" />
                                        </div>
                                        <br />
                                        <div t-if="order.date_out" t-att-title="widget.medical.chrome.format_datetime(order.date_out,true)">
                                            <strong>Out: </strong>
                                            <t t-esc="widget.medical.chrome.format_time(order.date_out,true)" />
                                        </div>
                                        <div t-if="order.date_out and order.duration_out_in" title="(HH:MM) = Out - In">
                                            <strong>Treatment Time: </strong>
                                            <t t-esc="widget.medical.chrome.floatToHour(order.duration_out_in/60)" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="v-tip-services row mt-1 m-0" t-if="order and order.order_lines">
                        <div class="col-8 scrollable-y d-scroll-service">
                            <nav>
                                <div class="nav nav-tabs" id="nav-tab" role="tablist">
                                    <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab" aria-controls="nav-home" aria-selected="true">Services</a>
                                    <a class="nav-item nav-link" id="nav-report-tab" data-toggle="tab" href="#nav-report" role="tab" aria-controls="nav-home" aria-selected="true" t-if="order.lab_reports.length">Reports</a>
                                    <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab" aria-controls="nav-profile" t-if="widget.medical.config.enable_app_complain" aria-selected="false">Complains</a>
                                </div>
                            </nav>
                            <div class="tab-content" id="nav-tabContent">
                                <div class="tab-pane show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
                                    <table class="table table-stripped table-sm">
                                        <thead>
                                            <tr>
                                                <th>Code</th>
                                                <th>Service</th>
                                                <th>Duration</th>
                                                <th class="text-right">Payable</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <t t-set="tot_dur" t-value="0"/>
                                            <tr t-foreach="order.order_lines or []" t-as="line">
                                                <td>
                                                    <span t-esc="line.product.default_code or ''"/>
                                                </td>
                                                <td width="40%">
                                                    <span t-esc="line.product.name"/>

                                                    <span class="fa fa-info text-yellow text-lg" t-if="line.is_insurance_applicable and line.pricelist_item_id" title="Insurance Applied"/>

                                                    <t t-if="line.note">
                                                        <br />
                                                        <span class="text-muted" t-esc="line.note or ''"/>
                                                    </t>
                                                    <t t-if="widget.medical.config.allow_multi_appointments and line.multi_resource_id">
                                                        <small class="text-muted font-italic font-weight-bolder">
                                                            By <t t-esc="line.multi_resource_id[1] or ''"/>
                                                            <t t-if="line.multi_start_time">
                                                                @ <t t-esc="widget.medical.chrome.format_datetime(line.multi_start_time, true)" />
                                                            </t>
                                                        </small>
                                                    </t>
                                                </td>
                                                <td>
                                                    <t t-if="line.duration">
                                                        <t t-set="tot_dur" t-value="line.duration + tot_dur"/>
                                                        <span t-esc="widget.floatToHour(line.duration)"/>
                                                    </t>
                                                    <t t-else="True">
                                                        N/A
                                                    </t>
                                                </td>
                                                <td class="text-right">
                                                    <t t-esc="widget.format_currency(line.payable_price_unit)" />
                                                </td>
                                            </tr>
                                        </tbody>
                                        <tfoot>
                                            <t t-set="vcolspan" t-value="2" />
                                            <tr t-if="order.discount">
                                                <th t-att-colspan="vcolspan" class="text-right">Discount : </th>
                                                <th class="text-right">
                                                    <t t-esc="widget.format_currency(order.discount)"/>
                                                </th>
                                            </tr>
                                            <tr>
                                                <th t-att-colspan="vcolspan" class="text-right">Total : </th>
                                                <th>
                                                    <t t-esc="widget.floatToHour(tot_dur)"/>
                                                    Minutes
                                                </th>
                                                <th class="text-right">
                                                    <t t-esc="widget.format_currency(order.net_total)"/>
                                                </th>
                                            </tr>
                                        </tfoot>
                                    </table>
                                    <div class="v-tip-payments row" t-if="order and order.paymentlines">
                                        <div class="col-6">
                                            <span class="btn btn-outline-info btn-sm h-chatter">
                                                View History
                                            </span>
                                        </div>
                                        <div class="col-6">
                                            <div>
                                                <strong>Payments</strong>
                                                <span class="btn btn-outline-success btn-sm v-direct-payment pull-right">
                                                    Advance Payment
                                                </span>
                                            </div>
                                            <table class="table table-stripped table-sm">
                                                <tbody>
                                                    <t t-set="tot_payments" t-value="0"/>
                                                    <t t-foreach="order.paymentlines or []" t-as="line">
                                                        <t t-set="tr_style" t-value="''" />
                                                        <t t-if="line.amount &lt; 0">
                                                            <t t-set="tr_style" t-value="'font-weight: bold; color: red;'" />
                                                        </t>
                                                        <tr t-att-style="tr_style">
                                                            <td width="60%">
                                                                <span t-esc="line.journal_name"/>
                                                            </td>
                                                            <td class="text-right">
                                                                <span t-esc="widget.format_currency(line.amount)"/>
                                                                <t t-set="tot_payments" t-value="line.amount + tot_payments"/>
                                                            </td>
                                                        </tr>
                                                    </t>
                                                    <tr>
                                                        <td class="text-right">Total Payment :</td>
                                                        <td class="text-right">
                                                            <strong>
                                                                <t t-esc="widget.format_currency(tot_payments)"/>
                                                            </strong>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane" id="nav-report"
                                    role="tabpanel" aria-labelledby="nav-report-tab" t-if="order.lab_reports.length">
                                    <t t-set="show_send_btns" t-value="0" />
                                    <table class="table table-stripped table-sm">
                                        <thead>
                                            <tr>
                                                <th style="wdith: 10px;">#</th>
                                                <th>Ref</th>
                                                <th>Department</th>
                                                <th>Test</th>
                                                <th>Status</th>
                                                <th width="25%">
                                                    <div style="font-size: 12px">
                                                        <span class="btn btn-sm btn-outline-success fa fa-print v-print-test-result" style="cursor: pointer">
                                                            R
                                                        </span>
                                                        <span class="btn btn-sm btn-outline-warning fa fa-print v-print-sample" style="cursor: pointer">
                                                            S
                                                        </span>
                                                        <span class="btn btn-sm btn-outline-primary fa fa-print v-print-sample-barcode" style="cursor: pointer">
                                                            B
                                                        </span>
                                                    </div>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr t-foreach="order.lab_reports" t-as="line" t-attf-class="{{line.state == 'cancelled' and 'text-muted font-weight-light'}}">
                                                <td><t t-esc="line_index + 1" /></td>
                                                <td><t t-esc="line.name" /></td>
                                                <td><t t-esc="line.lab_department_id and line.lab_department_id[1] or ''" /></td>
                                                <td><t t-esc="line.test_type_id and line.test_type_id[1] or ''" /></td>
                                                <td>
                                                    <span class="text-fuchsia text-capitalize">
                                                        <t t-esc="line.state" />
                                                    </span>
                                                </td>
                                                <td>
                                                    <div style="font-size: 12px">
                                                        <t t-if="line.state == 'completed' or line.state == 'handover'">
                                                            <t t-set="show_send_btns" t-value="1" />
                                                            <span class="fa fa-print btn btn-sm btn-outline-success v-test-print" style="cursor: pointer;" t-att-data-testids="line.id"> R</span>
                                                        </t>
                                                        <t t-if="line.state != 'cancelled'">
                                                            <span class="btn btn-sm btn-outline-warning fa fa-print v-line-print-sample" style="cursor: pointer" t-att-data-testids="line.id">
                                                                S
                                                            </span>
                                                            <span class="btn btn-sm btn-outline-primary fa fa-print v-line-print-sample-barcode" style="cursor: pointer" t-att-data-testids="line.id">
                                                                B
                                                            </span>
                                                        </t>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <br/>
                                    <div class="mb-4">
                                        <div class="btn btn-sm btn-outline-primary fa fa-paper-plane send-msg pull-right" style="cursor: pointer" t-att-data-id="order.id" t-if="show_send_btns">
                                            Send By SMS
                                        </div>
                                        <div class="btn btn-sm btn-outline-primary fa fa-paper-plane send-email pull-right" style="cursor: pointer" t-att-data-id="order.id" t-if="show_send_btns">
                                            Send By Email
                                        </div>
                                    </div>
                                </div>

                                <div class="tab-pane" t-if="widget.medical.config.enable_app_complain" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
                                    <table class="table table-stripped table-sm">
                                        <thead>
                                            <tr>
                                                <th>ID</th>
                                                <th>Complain Type</th>
                                                <th>Complain Date</th>
                                                <th>State</th>
                                                <th>Created By</th>
                                                <th>Resolved By</th>
                                                <th>Resolved On</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr t-foreach="order.complains or []" t-as="complain">
                                                <td><t t-esc="complain.name or ''"/></td>
                                                <td><t t-esc="complain.complain_type_id and complain.complain_type_id[1] or ''"/></td>
                                                <td><t t-esc="widget.format_datetime(complain.complain_date)"/></td>
                                                <td><t t-esc="(complain.state or '').toUpperCase()"/></td>
                                                <td><t t-esc="complain.create_eid and complain.create_eid[1] or ''"/></td>
                                                <td><t t-esc="complain.resolved_eid and complain.resolved_eid[1] or ''"/></td>
                                                <td><t t-esc="widget.format_datetime(complain.resolved_on)"/></td>
                                                <td><span class="btn btn-link fa fa-edit edit-complain" t-att-data-complain_id="complain.id"/></td>
                                            </tr>
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <td colspan="8"><span class="btn btn-outline-primary create-complain">Raise Complain</span></td>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="col-4" style="padding-top: 20px; border-left: ">
                            <div class="appointment-control-btn">
                                <!-- <t t-set="to_disable"
                                   t-value="_.contains(['invoiced', 'paid', 'done', 'cancel'], order.state) or (order and order.patient_invoice_id and order.invoice_state != 'draft')"/> -->
                                <!--  or (order and order.patient_invoice_id) -->

                                <!-- <t t-set="to_disable"
                                   t-value="order and order.patient_invoice_id and order.invoice_state and order.invoice_state != 'draft'"/> -->

                                <t t-set="to_disable"
                                   t-value="order and order.patient_invoice_id"/>
                                <t t-if="to_disable">
                                    <button class="btn v-order-edit btn-outline-primary"
                                            title="Edit Appointment" t-att-data-order="order and order.id"
                                            disabled="disabled">
                                        <span class="fa fa-edit"/>
                                    </button>

                                    <button class="btn v-order-delete btn-outline-danger" title="Remove Appointment"
                                            t-att-data-order="order and order.id" disabled="disabled">
                                        <span class="fa fa-trash"/>
                                    </button>
                                </t>
                                <t t-else="">
                                    <button class="btn v-order-edit btn-outline-primary"
                                            title="Edit Appointment" t-att-data-order="order and order.id">
                                        <span class="fa fa-edit"/>
                                    </button>

                                    <button class="btn v-order-delete btn-outline-danger" title="Remove Appointment"
                                            t-att-data-order="order and order.id">
                                        <span class="fa fa-trash"/>
                                    </button>
                                </t>

                                <button class="btn v-order-duplicate btn-outline-dange" title="Duplicate Appointment"
                                        t-att-data-order="order and order.id">
                                    <span class="fa fa-clone"/>
                                </button>

                                <button class="btn v-order-cut btn-outline-dange" title="Move Appointment"
                                        t-att-data-order="order and order.id">
                                    <span class="fa fa-cut"/>
                                </button>
                            </div>
                            <div class="mt-2 to_waiting_div">
                                <!-- <t t-if="to_disable">
                                    <button class="btn v-order-waiting-list btn-outline-warning"
                                            title="To Add Waiting" t-att-data-order="order and order.id"
                                            disabled="disabled">
                                        To Waiting
                                    </button>
                                </t>
                                <t t-else="">
                                    <button class="btn v-order-waiting-list btn-outline-warning"
                                            title="To Add Waiting" t-att-data-order="order and order.id">
                                        To Waiting
                                    </button>
                                </t> -->
                                <button class="btn v-order-invoice btn-outline-info"
                                        title="Create Invoice" t-att-data-order="order and order.id"
                                        t-if="to_disable">
                                    Open Invoice
                                </button>
                                <button t-else="1" class="btn v-order-validate btn-success">
                                    Validate
                                </button>
                            </div>

                            <div class="mt-2">
                                <textarea id="text_order_note" rows="7" style=" font-size: 14px"
                                          placeholder="Appointment Note"><t t-esc="order.note or ''" /></textarea>
                                <div class='ml-1 v-note-save btn btn-success' style="display: table">Save</div>
                            </div>
                        </div>
                    </div>
                    <div class="reception-note row m-0" t-if="order and order.reception_note">
                        <b>Reception Note:</b><t t-esc="order.reception_note"/>
                    </div>
                </div>
            </div>
        </div>
    </t>

    <!-- <t t-name="TipEvent">
        <div class="v-tip" t-if="order">
            <div class="v-tip-partner-details" t-if="order.partner_id">
                <div>
                    <button class="btn btn-light pull-right" t-attf-data-tip="Edit #{widget.label_list['partner_id']}" t-attf-title="Edit #{widget.label_list['partner_id']}">
                        <span t-att-data-partner-id="order.partner.id" class="fa fa-edit v-partner-edit"/>
                    </button>
                </div>
                <table class="v-tip-table">
                    <t t-if="order.partner.file_no">
                        <tr>
                            <th style="width: 20%"><span class="fa fa-file" /></th>
                            <td><span t-esc="order.partner.file_no or '-'" /></td>
                        </tr>
                    </t>
                    <t t-if="order.partner.phone">
                        <tr>
                            <th><span class="fa fa-phone" /></th>
                            <td><span t-esc="order.partner.phone or '-'" /></td>
                        </tr>
                    </t>
                    <t t-if="order.partner.mobile">
                        <tr>
                            <th><span class="fa fa-mobile" /></th>
                            <td><span t-esc="order.partner.mobile or '-'" /></td>
                        </tr>
                    </t>
                </table>
            </div>
            <hr t-if="order.partner_id"/>
            <div class="v-tip-services" t-if="order.order_lines">
                <ol>
                    <t t-foreach="order.order_lines" t-as="line">
                        <li><span t-esc="line.product.name" /></li>
                    </t>
                </ol>
            </div>
            <hr/>
            <div class="v-tip-actions">
                <button
                        class="v-tip-button btn btn-light v-order-edit"
                        data-tip="Edit Appointment" t-att-data-order="order.id">
                        <span class="fa fa-edit"/>
                </button>
            </div>
        </div>
    </t> -->

    <!-- <t t-name="tooltip">
        <br/>
        <strong><t t-esc="obj.partner_id[1]"/></strong> <br/><br/>
        <strong>Time :</strong> <t t-esc="moment(obj.start_time).format('HH:mm')"/> - <t t-esc="moment(obj.start_time).format('HH:mm')"/> <br/><br/>
        <strong>Resource :</strong> <t t-esc="obj.resource_id[1]"/><br/><br/>
    </t> -->

</templates>
